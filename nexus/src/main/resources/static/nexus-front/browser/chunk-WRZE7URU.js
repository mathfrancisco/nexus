import{a as N,b as U,c as V,d as L}from"./chunk-DRQZQDWU.js";import{a as H}from"./chunk-YSF2NAPJ.js";import{Eb as j,Kb as m,Lb as T,Mb as f,Oa as o,Q as R,V as S,Va as u,W as y,Y as D,_a as p,ab as c,bb as k,d as w,eb as g,gb as e,gc as B,ha as I,hb as t,hc as $,ia as E,ib as s,j as C,kc as M,mb as O,mc as A,oa as _,ob as P,pb as x,rc as z,xb as r,yb as F,zb as d}from"./chunk-SN24K5UO.js";var h=class a{constructor(n){this.http=n}apiUrl=`${H.apiUrl}/api/v1/roi`;getRoiAnalysis(){return this.http.get(`${this.apiUrl}/analysis`)}getPlatformRoi(n){return this.http.get(`${this.apiUrl}/${n}`)}static \u0275fac=function(i){return new(i||a)(S(z))};static \u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"})};function q(a,n){a&1&&(e(0,"div",12),s(1,"app-loading-spinner",13),t())}function J(a,n){if(a&1&&(e(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),s(4,"i"),t(),e(5,"div")(6,"h4",45),r(7),t(),e(8,"p",22),r(9,"Platform ROI"),t()()(),e(10,"span"),r(11),m(12,"metricFormatter"),t()(),e(13,"div",46),s(14,"div",47),t()()),a&2){let i=n.$implicit;o(4),g("fab fa-"+i.name.toLowerCase()+" text-xl text-gray-600"),o(3),F(i.name),o(3),g("text-lg font-bold "+(i.roi>=0?"text-green-600":"text-red-600")),o(),d(" ",f(12,8,i.roi,"percentage")," "),o(3),k("width",(i.roi<0?0:i.roi)+"%")}}function K(a,n){if(a&1){let i=O();e(0,"button",48),P("click",function(){let v=I(i).$implicit,b=x(2);return E(b.changePeriod(v))}),r(1),m(2,"titlecase"),t()}if(a&2){let i=n.$implicit,l=x(2);g(l.selectedPeriod()===i?"px-6 py-2 bg-white text-indigo-600 shadow-sm":"px-6 py-2 text-gray-600 hover:text-gray-900"),o(),d(" ",T(2,3,i)," ")}}function Q(a,n){if(a&1&&(e(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"h3",18),r(5,"Total Investment"),t(),e(6,"div",19),s(7,"i",20),t()(),e(8,"p",21),r(9),m(10,"metricFormatter"),t(),e(11,"p",22),r(12,"Total campaign investment"),t()(),e(13,"div",16)(14,"div",17)(15,"h3",18),r(16,"Total Revenue"),t(),e(17,"div",23),s(18,"i",24),t()(),e(19,"p",21),r(20),m(21,"metricFormatter"),t(),e(22,"p",22),r(23,"Generated revenue"),t()(),e(24,"div",16)(25,"div",17)(26,"h3",18),r(27,"ROI Percentage"),t(),e(28,"div",25),s(29,"i",26),t()(),e(30,"p",21),r(31),m(32,"metricFormatter"),t(),e(33,"p",22),r(34,"Return on investment"),t()()(),e(35,"div",27)(36,"div",28)(37,"div",29)(38,"div")(39,"h3",30),r(40,"Platform ROI Breakdown"),t(),e(41,"p",22),r(42,"Performance across different platforms"),t()(),e(43,"button",31),s(44,"i",32),r(45," Export "),t()(),e(46,"div",33),p(47,J,15,11,"div",34),t()(),e(48,"div",28)(49,"div",35)(50,"div",36)(51,"h3",30),r(52,"Historical Performance"),t(),e(53,"p",22),r(54,"ROI trends over time"),t()(),e(55,"div",37),p(56,K,3,5,"button",38),t()(),e(57,"div",39),s(58,"canvas",40),t()()()()),a&2){let i=n.ngIf,l=x();o(9),d(" ",f(10,6,i.totalInvestment,"currency")," "),o(11),d(" ",f(21,9,i.totalRevenue,"currency")," "),o(11),d(" ",f(32,12,i.roiPercentage,"percentage")," "),o(16),c("ngForOf",i.platforms)("ngForTrackBy",l.trackByPlatformName),o(9),c("ngForOf",l.periods)}}var G=class a{roiService=y(h);destroyed$=new C;destroyRef=y(_);periods=["week","month","year"];roiData=u({totalInvestment:0,totalRevenue:0,roiPercentage:0,platforms:[],historicalData:[]});loading=u(!1);selectedPeriod=u("month");chart;ngOnInit(){this.loadRoiData()}ngAfterViewInit(){this.initializeChart()}ngOnDestroy(){this.chart&&this.chart.destroy(),this.destroyed$.next(),this.destroyed$.complete()}loadRoiData(){return w(this,null,function*(){this.loading.set(!0);try{let n=yield this.roiService.getRoiAnalysis().pipe(V(this.destroyRef)).toPromise();this.roiData.set(n??this.roiData()),this.updateChart()}catch(n){console.error("Erro ao carregar dados de ROI:",n)}finally{this.loading.set(!1)}})}changePeriod(n){this.selectedPeriod.set(n),this.updateChart()}initializeChart(){let n=document.getElementById("historicalChart");n&&(this.chart=new L(n,{type:"line",data:{labels:[],datasets:[{label:"ROI History",data:[],borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:this.getChartOptions()}),this.updateChart())}updateChart(){if(!this.chart||!this.roiData().historicalData.length)return;let n=this.filterDataByPeriod(this.roiData().historicalData);this.chart.data.labels=n.map(i=>new Date(i.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),this.chart.data.datasets[0].data=n.map(i=>i.value),this.chart.update()}filterDataByPeriod(n){let i=new Date,l={week:7,month:30,year:365},v=new Date(i.setDate(i.getDate()-l[this.selectedPeriod()]));return n.filter(b=>new Date(b.date)>=v)}getChartOptions(){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:n=>`ROI: ${n.parsed.y.toFixed(2)}%`}}},scales:{x:{grid:{display:!1}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{callback:n=>`${n}%`}}},interaction:{intersect:!1,mode:"index"}}}trackByPlatformName(n,i){return i.name}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=D({type:a,selectors:[["app-roi"]],standalone:!0,features:[j],decls:15,vars:2,consts:[[1,"min-h-screen","bg-gradient-to-b","from-gray-50","to-white"],["class","fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],[1,"relative","bg-gradient-to-br","from-indigo-600","via-purple-600","to-pink-500","py-20","overflow-hidden"],[1,"absolute","inset-0"],[1,"absolute","inset-0","bg-[url('/assets/grid.svg')]","opacity-10"],[1,"absolute","top-0","-left-4","w-72","h-72","bg-purple-500","rounded-full","mix-blend-multiply","filter","blur-xl","opacity-70","animate-blob"],[1,"absolute","-bottom-8","right-20","w-72","h-72","bg-indigo-500","rounded-full","mix-blend-multiply","filter","blur-xl","opacity-70","animate-blob","animation-delay-2000"],[1,"container","mx-auto","px-4","relative"],[1,"inline-block","px-4","py-1","bg-white/10","backdrop-blur-sm","rounded-full","text-white","text-sm","font-medium","mb-4"],[1,"text-4xl","md:text-5xl","font-bold","text-white","mb-4"],[1,"text-xl","text-indigo-100","max-w-2xl"],["class","container mx-auto px-4 -mt-10 pb-20 relative z-10",4,"ngIf"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","flex","items-center","justify-center","z-50"],["message","Loading ROI analysis..."],[1,"container","mx-auto","px-4","-mt-10","pb-20","relative","z-10"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"group","bg-white","rounded-2xl","shadow-xl","hover:shadow-2xl","transition-all","duration-500","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-gray-600","font-semibold"],[1,"w-12","h-12","rounded-xl","bg-blue-100","group-hover:bg-blue-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-coins","text-xl","text-blue-600","group-hover:text-white","transition-colors","duration-300"],[1,"text-4xl","font-bold","text-gray-800","mb-2"],[1,"text-sm","text-gray-500"],[1,"w-12","h-12","rounded-xl","bg-green-100","group-hover:bg-green-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-chart-line","text-xl","text-green-600","group-hover:text-white","transition-colors","duration-300"],[1,"w-12","h-12","rounded-xl","bg-purple-100","group-hover:bg-purple-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-percentage","text-xl","text-purple-600","group-hover:text-white","transition-colors","duration-300"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-xl","font-semibold","text-gray-800","mb-2"],[1,"flex","items-center","px-4","py-2","bg-gray-100","hover:bg-gray-200","rounded-lg","text-gray-700","transition-colors","duration-300"],[1,"fas","fa-download","mr-2"],[1,"space-y-6"],["class","group p-4 rounded-xl hover:bg-gray-50 transition-all duration-300",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","mb-8"],[1,"mb-4","sm:mb-0"],[1,"flex","space-x-2","bg-gray-100","p-1","rounded-xl"],["class","rounded-lg font-medium transition-all duration-300",3,"class","click",4,"ngFor","ngForOf"],[1,"h-80"],["id","historicalChart"],[1,"group","p-4","rounded-xl","hover:bg-gray-50","transition-all","duration-300"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","rounded-lg","bg-gray-100","flex","items-center","justify-center"],[1,"font-medium","text-gray-800"],[1,"w-full","bg-gray-100","rounded-full","h-2","overflow-hidden"],[1,"bg-gradient-to-r","from-indigo-500","to-purple-500","h-full","rounded-full","transition-all","duration-300","transform","origin-left","group-hover:scale-x-105"],[1,"rounded-lg","font-medium","transition-all","duration-300",3,"click"]],template:function(i,l){i&1&&(e(0,"div",0),p(1,q,2,0,"div",1),e(2,"div",2)(3,"div",3),s(4,"div",4)(5,"div",5)(6,"div",6),t(),e(7,"div",7)(8,"span",8),r(9," ROI Analytics "),t(),e(10,"h1",9),r(11," Track Your Investment Returns "),t(),e(12,"p",10),r(13," Comprehensive analysis of your social media marketing investments and returns "),t()()(),p(14,Q,59,15,"div",11),t()),i&2&&(o(),c("ngIf",l.loading()),o(13),c("ngIf",l.roiData()))},dependencies:[N,U,A,B,$,M],encapsulation:2})};export{G as RoiComponent};
