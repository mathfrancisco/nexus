import{c as J,d as Q,e as W}from"./chunk-UDZZJXT7.js";import{a as q,b as G,c as Z,d as S}from"./chunk-DRQZQDWU.js";import{a as Y}from"./chunk-YSF2NAPJ.js";import{Eb as j,Fb as R,Ib as A,Kb as d,Lb as $,Mb as p,Oa as o,Pa as P,Q as _,V as k,Va as u,W as D,Y as I,_a as g,ab as c,bb as b,d as E,eb as y,fc as N,gb as i,gc as U,ha as T,hb as r,hc as z,ia as F,ib as l,j as M,kc as L,lc as V,mb as B,mc as H,oa as O,ob as w,pb as x,rc as K,xb as a,yb as C,zb as m}from"./chunk-SN24K5UO.js";var v=class n{constructor(t){this.http=t}apiUrl=`${Y.apiUrl}/api/v1/analytics/platforms`;getPlatformMetrics(t){return this.http.get(`${this.apiUrl}/${t}`)}getAllPlatformsMetrics(){return this.http.get(`${this.apiUrl}/all`)}static \u0275fac=function(e){return new(e||n)(k(K))};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};var te=(n,t,e)=>({"text-green-500":n,"text-red-500":t,"text-gray-500":e}),ie=()=>["day","week","month"];function re(n,t){n&1&&(i(0,"div",21),l(1,"app-loading-spinner",22),r())}function ne(n,t){if(n&1&&(i(0,"option",23),a(1),r()),n&2){let e=t.$implicit;c("value",e),o(),m(" ",e," ")}}function ae(n,t){if(n&1&&(i(0,"div",63)(1,"div",64)(2,"span",65),a(3),r(),i(4,"span",66),a(5),d(6,"metricFormatter"),r()(),i(7,"div",67),l(8,"div",68),r()()),n&2){let e=t.$implicit;o(3),C(e.ageRange),o(2),m(" ",p(6,4,e.percentage,"percentage")," "),o(3),b("width",e.percentage+"%")}}function oe(n,t){if(n&1){let e=B();i(0,"button",69),w("click",function(){let h=T(e).$implicit,f=x(2);return F(f.changeTimeframe(h))}),a(1),d(2,"titlecase"),r()}if(n&2){let e=t.$implicit,s=x(2);y(s.selectedTimeframe()===e?"px-6 py-2 bg-white text-indigo-600 shadow-sm":"px-6 py-2 text-gray-600 hover:text-gray-900"),o(),m(" ",$(2,3,e)," ")}}function le(n,t){if(n&1&&(i(0,"div",70)(1,"div",71)(2,"span",72),a(3),r(),i(4,"span",73),a(5),d(6,"metricFormatter"),r()(),i(7,"div",74),l(8,"div",75),r()()),n&2){let e=t.$implicit;o(3),C(e.ageRange),o(2),m(" ",p(6,4,e.percentage,"percentage")," "),o(3),b("width",e.percentage+"%")}}function se(n,t){if(n&1&&(i(0,"div",24)(1,"div",25)(2,"div",26)(3,"h3",27),a(4,"Followers"),r(),i(5,"div",28),l(6,"i",29),r()(),i(7,"p",30),a(8),d(9,"metricFormatter"),r(),i(10,"div",31)(11,"span",32),l(12,"i"),a(13),d(14,"metricFormatter"),r()()(),i(15,"div",25)(16,"div",26)(17,"h3",27),a(18,"Engagement Rate"),r(),i(19,"div",33),l(20,"i",34),r()(),i(21,"p",30),a(22),d(23,"metricFormatter"),r(),i(24,"div",35),l(25,"i",36),i(26,"span"),a(27,"Updated just now"),r()()(),i(28,"div",25)(29,"div",26)(30,"h3",27),a(31,"Interactions"),r(),i(32,"div",37),l(33,"i",38),r()(),i(34,"p",30),a(35),d(36,"metricFormatter"),r(),i(37,"div",39)(38,"span",40),l(39,"i",41),a(40),d(41,"number"),r(),i(42,"span",40),l(43,"i",42),a(44),d(45,"number"),r()()(),i(46,"div",25)(47,"div",26)(48,"h3",27),a(49,"Demographics"),r(),i(50,"div",43),l(51,"i",44),r()(),i(52,"div",45),g(53,ae,9,7,"div",46),r(),i(54,"button",47),a(55," View All Demographics "),l(56,"i",48),r()(),i(57,"div",49)(58,"div",50)(59,"div",51)(60,"h3",52),a(61,"Daily Metrics"),r(),i(62,"div",53),g(63,oe,3,5,"button",54),r()(),i(64,"div",55),l(65,"canvas",56),r()(),i(66,"div",50)(67,"div",57)(68,"h3",58),a(69,"Demographics Distribution"),r()(),i(70,"div",59)(71,"div",55),l(72,"canvas",60),r(),i(73,"div",61),g(74,le,9,7,"div",62),r()()()()()),n&2){let e=t.ngIf,s=x();o(8),m(" ",p(9,14,e.followers,"number")," "),o(3),c("ngClass",A(32,te,e.growth.daily>0,e.growth.daily<0,e.growth.daily===0)),o(),y("fas fa-"+(e.growth.daily>0?"arrow-up":e.growth.daily<0?"arrow-down":"equals")+" mr-2"),o(),m(" ",p(14,17,e.growth.daily,"percentage")," Today "),o(9),m(" ",p(23,20,e.engagementRate,"percentage")," "),o(13),m(" ",p(36,23,e.interactions,"number")," "),o(5),m(" Likes: ",p(41,26,e.interactions*.6,"1.0-0")," "),o(4),m(" Comments: ",p(45,29,e.interactions*.4,"1.0-0")," "),o(9),c("ngForOf",e.demographics.slice(0,3))("ngForTrackBy",s.trackByDemographicAgeRange),o(10),c("ngForOf",R(36,ie)),o(11),c("ngForOf",e.demographics)("ngForTrackBy",s.trackByDemographicAgeRange)}}var X=class n{constructor(t){this.destroyRef=t}analyticsService=D(v);destroyed$=new M;selectedPlatform=u("YOUTUBE");selectedTimeframe=u("week");metrics=u({platform:"",followers:0,engagementRate:0,interactions:0,dailyMetrics:[],demographics:[],growth:{daily:0,weekly:0,monthly:0}});loading=u(!1);metricsChart;demographicsChart;platforms=["YOUTUBE","INSTAGRAM","TIKTOK","LINKEDIN"];ngOnInit(){this.loadMetrics()}ngAfterViewInit(){this.initializeCharts()}ngOnDestroy(){this.metricsChart&&this.metricsChart.destroy(),this.demographicsChart&&this.demographicsChart.destroy(),this.destroyed$.next(),this.destroyed$.complete()}loadMetrics(){return E(this,null,function*(){this.loading.set(!0);try{let t=yield this.analyticsService.getPlatformMetrics(this.selectedPlatform()).pipe(Z(this.destroyRef)).toPromise();this.metrics.set(t??this.metrics()),this.updateCharts()}catch(t){console.error("Erro ao carregar m\xE9tricas:",t)}finally{this.loading.set(!1)}})}initializeCharts(){this.initializeMetricsChart(),this.initializeDemographicsChart()}initializeMetricsChart(){let t=document.getElementById("dailyMetricsChart");t&&(this.metricsChart=new S(t,{type:"line",data:{labels:[],datasets:[{label:"Engagement",data:[],borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:this.getMetricsChartOptions()}))}initializeDemographicsChart(){let t=document.getElementById("demographicsChart");t&&(this.demographicsChart=new S(t,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:["rgba(99, 102, 241, 0.8)","rgba(167, 139, 250, 0.8)","rgba(217, 70, 239, 0.8)","rgba(236, 72, 153, 0.8)"]}]},options:this.getDemographicsChartOptions()}))}updateCharts(){this.updateMetricsChart(),this.updateDemographicsChart()}updateMetricsChart(){if(!this.metricsChart)return;let t=this.filterMetricsByTimeframe(this.metrics().dailyMetrics);this.metricsChart.data.labels=t.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),this.metricsChart.data.datasets[0].data=t.map(e=>e.value),this.metricsChart.update()}updateDemographicsChart(){if(!this.demographicsChart)return;let t=this.metrics().demographics;this.demographicsChart.data.labels=t.map(e=>e.ageRange),this.demographicsChart.data.datasets[0].data=t.map(e=>e.percentage),this.demographicsChart.update()}filterMetricsByTimeframe(t){let e=new Date,s={day:1,week:7,month:30},h=new Date(e.setDate(e.getDate()-s[this.selectedTimeframe()]));return t.filter(f=>new Date(f.date)>=h)}getMetricsChartOptions(){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:t=>`Engagement: ${t.parsed.y.toLocaleString()}`}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}},interaction:{intersect:!1,mode:"index"}}}getDemographicsChartOptions(){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{usePointStyle:!0,padding:20}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.parsed}%`}}}}}changePlatform(t){let e=t.target.value;this.selectedPlatform.set(e),this.loadMetrics()}changeTimeframe(t){this.selectedTimeframe.set(t),this.updateMetricsChart()}trackByPlatformName(t,e){return e}trackByDemographicAgeRange(t,e){return e.ageRange}static \u0275fac=function(e){return new(e||n)(P(O))};static \u0275cmp=I({type:n,selectors:[["app-metrics"]],standalone:!0,features:[j],decls:24,vars:4,consts:[[1,"min-h-screen","bg-gradient-to-b","from-gray-50","to-white"],["class","fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],[1,"relative","bg-gradient-to-br","from-indigo-600","via-purple-600","to-pink-500","py-20","overflow-hidden"],[1,"absolute","inset-0"],[1,"absolute","inset-0","bg-[url('/assets/grid.svg')]","opacity-10"],[1,"absolute","top-0","-left-4","w-72","h-72","bg-purple-500","rounded-full","mix-blend-multiply","filter","blur-xl","opacity-70","animate-blob"],[1,"absolute","-bottom-8","right-20","w-72","h-72","bg-indigo-500","rounded-full","mix-blend-multiply","filter","blur-xl","opacity-70","animate-blob","animation-delay-2000"],[1,"container","mx-auto","px-4","relative"],[1,"flex","flex-col","md:flex-row","justify-between","items-center"],[1,"text-center","md:text-left","mb-8","md:mb-0"],[1,"inline-block","px-4","py-1","bg-white/10","backdrop-blur-sm","rounded-full","text-white","text-sm","font-medium","mb-4"],[1,"text-4xl","md:text-5xl","font-bold","text-white","mb-4"],[1,"text-xl","text-indigo-100"],[1,"relative","group"],[1,"absolute","-inset-0.5","bg-gradient-to-r","from-pink-500","to-purple-500","rounded-lg","blur","opacity-50","group-hover:opacity-100","transition","duration-300"],[1,"relative","bg-white","bg-opacity-10","backdrop-blur-sm","text-white","border","border-white/20","rounded-lg","px-6","py-3","appearance-none","cursor-pointer","hover:bg-opacity-20","transition-all","duration-300","focus:outline-none","focus:ring-2","focus:ring-white/50",3,"change"],["class","text-gray-900",3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","pointer-events-none","text-white"],[1,"fas","fa-chevron-down"],[1,"container","mx-auto","px-4","-mt-10","pb-20","relative","z-10"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",4,"ngIf"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","flex","items-center","justify-center","z-50"],["message","Loading metrics..."],[1,"text-gray-900",3,"value"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"group","bg-white","rounded-2xl","shadow-xl","hover:shadow-2xl","transition-all","duration-500","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-gray-600","font-semibold"],[1,"w-12","h-12","rounded-xl","bg-indigo-100","group-hover:bg-indigo-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-users","text-xl","text-indigo-600","group-hover:text-white","transition-colors","duration-300"],[1,"text-4xl","font-bold","text-gray-800","mb-4"],[1,"flex","items-center"],[1,"flex","items-center","text-sm","font-medium",3,"ngClass"],[1,"w-12","h-12","rounded-xl","bg-green-100","group-hover:bg-green-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-chart-line","text-xl","text-green-600","group-hover:text-white","transition-colors","duration-300"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],[1,"fas","fa-clock"],[1,"w-12","h-12","rounded-xl","bg-purple-100","group-hover:bg-purple-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-comments","text-xl","text-purple-600","group-hover:text-white","transition-colors","duration-300"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-gray-500"],[1,"fas","fa-heart","text-red-500","mr-1"],[1,"fas","fa-reply","text-blue-500","mr-1"],[1,"w-12","h-12","rounded-xl","bg-blue-100","group-hover:bg-blue-600","flex","items-center","justify-center","transition-colors","duration-300"],[1,"fas","fa-users-viewfinder","text-xl","text-blue-600","group-hover:text-white","transition-colors","duration-300"],[1,"space-y-3"],["class","group/item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","mt-4","text-sm","text-gray-500","hover:text-gray-700","transition-colors","duration-300"],[1,"fas","fa-chevron-right","ml-1"],[1,"col-span-1","md:col-span-2","lg:col-span-4","space-y-6"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","mb-8"],[1,"text-xl","font-semibold","text-gray-800","mb-4","sm:mb-0"],[1,"flex","space-x-2","bg-gray-100","p-1","rounded-xl"],["class","rounded-lg font-medium transition-all duration-300",3,"class","click",4,"ngFor","ngForOf"],[1,"h-80"],["id","dailyMetricsChart"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-xl","font-semibold","text-gray-800"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],["id","demographicsChart"],[1,"space-y-4"],["class","group p-4 rounded-xl hover:bg-gray-50 transition-colors duration-300",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group/item"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-sm","text-gray-600"],[1,"text-sm","font-medium","text-gray-800"],[1,"w-full","bg-gray-100","rounded-full","h-1.5","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","h-full","rounded-full","transition-all","duration-300","transform","origin-left","group-hover/item:scale-x-110"],[1,"rounded-lg","font-medium","transition-all","duration-300",3,"click"],[1,"group","p-4","rounded-xl","hover:bg-gray-50","transition-colors","duration-300"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-gray-700","font-medium"],[1,"text-indigo-600","font-semibold"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-gradient-to-r","from-indigo-500","to-purple-500","h-2","rounded-full","transition-all","duration-300"]],template:function(e,s){e&1&&(i(0,"div",0),g(1,re,2,0,"div",1),i(2,"div",2)(3,"div",3),l(4,"div",4)(5,"div",5)(6,"div",6),r(),i(7,"div",7)(8,"div",8)(9,"div",9)(10,"span",10),a(11," Real-Time Analytics "),r(),i(12,"h1",11),a(13," Platform Metrics "),r(),i(14,"p",12),a(15," Comprehensive insights for your social media presence "),r()(),i(16,"div",13),l(17,"div",14),i(18,"select",15),w("change",function(f){return s.changePlatform(f)}),g(19,ne,2,2,"option",16),r(),i(20,"div",17),l(21,"i",18),r()()()()(),i(22,"div",19),g(23,se,75,37,"div",20),r()()),e&2&&(o(),c("ngIf",s.loading()),o(18),c("ngForOf",s.platforms)("ngForTrackBy",s.trackByPlatformName),o(4),c("ngIf",s.metrics()))},dependencies:[q,G,H,N,U,z,V,L,W,J,Q],encapsulation:2})};export{X as MetricsComponent};
